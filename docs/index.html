<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="bootstrap.css" rel="stylesheet">
  <title>ゆーかねすぴれこ(Yukarinette Speech Recognition)</title>
  <meta property="twitter:card" content="summary">
  <meta property="twitter:site" content="@HARUKei66494739">
  <meta property="twitter:description" content="ゆかりねっと&amp;ゆかコネNEOの音声認識代替ツール">
  <meta property="twitter:image" content="https://harukei66494739.github.io/recognize/og.png">
  <meta property="og:url" content="https://harukei66494739.github.io/recognize/">
  <meta property="og:type" content="product">
  <meta property="og:title" content="ゆーかねすぴれこ">
  <meta property="og:description" content="ゆかりねっと&amp;ゆかコネNEOの音声認識代替ツール">
  <meta property="og:image" content="https://harukei66494739.github.io/recognize/og.png">
  <meta property="og:image:width" content="64">
  <meta property="og:image:height" content="64">
<style>
  :root {
  --yukane-color: #8A609D;
  --yukane-color-hover: #6e4c7d;
  --yukane-link-color: #ddd1e3;
  --yukane-link-color-hover: #d2c1d9;


}

.nav {
  --bs-nav-link-color: var(--yukane-link-color);
  --bs-nav-link-hover-color: var(--yukane-link-color-hover);
}
</style>
</head>
<body class="bg-light">
  <div class="page-header sticky-top bg-primary">
    <div class="container ms-5 text-light pt-1">
      <div style="display: grid; grid-template-columns: 56px 1fr;">
        <img class="d-block img-fluid" src="assets/icon48.png" style="justify-self: center; align-self: center;">
        <h1 class="mt-2 fs-2" style="line-height: 0.8; color:white;">ゆーかねすぴれこ<br>
          <span class="fs-6" style="opacity: 0.6;">Yukarinette Speech Recognition</span></h1>  
      </div>

      <ul class="nav nav-underline bg-primary" id="yukaneTab" role="tablist" data-bs-theme="dark">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Home</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-tab-pane" type="button" role="tab" aria-controls="overview-tab-pane" aria-selected="false">まず見て！</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="kantan-tab" data-bs-toggle="tab" data-bs-target="#kantan-tab-pane" type="button" role="tab" aria-controls="kantan-tab-pane" aria-selected="false">KANTAN</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-tab-pane" type="button" role="tab" aria-controls="info-tab-pane" aria-selected="false">詳細情報</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#faq-tab-pane" type="button" role="tab" aria-controls="faq-tab-pane" aria-selected="false">FAQ</button>
        </li>
      </ul>
    </div>
  </div>

  <section class="tab-content mt-3 mb-3" id="yukaneTabContent">
    <section class="tab-pane fade show active" id="home-tab-pane"  role="tabpanel" aria-labelledby="home-tab" tabindex="0">
      <section class="container ms-5">
        <section class="mb-5">
          <p>ゆかりねっと-Yukarinette-の音声認識エンジンを別処理で認識させるためのツールです。<br>
            Windows10/11 x64で動作<br>
  
          <p>各種説明は上のタブから</p>  
        </section>

        <div id="download-container" style="display: none">
            <button id="download" class="btn btn-primary px-3">ダウンロード</button>
            <div id="version"></div>
        </div>
        <div id="download-fail-container">
          <button class="btn btn-primary px-3" click="document.location.assign('https://github.com/HARUKei66494739/recognize')">ダウンロード</button>
        </div>
      </section>
    </section>

    <!--
    
    まずみて！

    -->
    <section class="tab-pane" id="overview-tab-pane" role="tabpanel" aria-labelledby="overview-tab" tabindex="0">
      <h2 class="d-none container ms-5 mb-3">まず見て！</h2>
      <section class="container ms-5 mb-5">
        <h3>構成比較</h3>
    
        <h4 class="border-bottom border-dark-subtle my-3">ゆかりねっと通常使用時</h4>
        <p>ゆかりねっと通常使用時は以下のようにchromeを通してgoogleから音声認識結果を取得します。（③の箇所）<br>
          この音声認識結果を取得する際にgoogleが応答を返さないケースがあり、これが俗に言う認識詰まりです。</p>
        <img class="d-block img-fluid" src="assets/overview_01_yukarinet_.png">
      
        <h4 class="border-bottom border-dark-subtle my-3">ゆーかねすぴれこ（google）使用時</h4>
        <p>基本の流れは通常使用と同じですがchromeを経由しません。<br>
          chromeには無いゆーかねすぴれこの様々なパラメータを使うことにより詰まりを減らすことが出来ます。</p>
        <img class="d-block img-fluid" src="assets/overview_02_yukanesupireco_google_.png">

        <h4 class="border-bottom border-dark-subtle my-3">ゆーかねすぴれこ（kotoba_whisper）使用時</h4>
        <p>googleに任せていた音声認識結果をkotoba_whisperに任せます。(②と③の箇所)<br>
          内部処理なので詰まることはありませんがgoogleとまた違った認識結果になったり、誤認識が発生する場合があります。<br>
          またGPUパワーも使います。</p>
        <img class="d-block img-fluid" src="assets/overview_03_yukanesupireco_kotoba_.png">
      </section>
    </section>


    <!--
    
    KANTAN

    -->
    <section class="tab-pane" id="kantan-tab-pane" role="tabpanel" aria-labelledby="kantan-tab" tabindex="0">
      <h2 class="d-none container ms-5 mb-3">簡単スタート</h2>
      <section class="container ms-5 mb-5">
        <h3>セットアップ！</h3>
    
        <h4 class="border-bottom border-dark-subtle my-3">新規インストール</h4>
        <p>任意のドライブの浅い場所に好きなフォルダを作ります。<br>
           ※ 日本語が含まれるパス、フォルダに置くとGUIが起動しません。必ず英数字のみのパス、フォルダに配置してください。<br>
           例)<br>
           　OK → K:\tool\recognize<br>
           　NG → K:\ツール\recognize<br>
        <p>
        <img class="d-block img-fluid" src="assets/kantan-setup-01.png">

        <p>作成したフォルダにダウンロードしたsetup-*.exeを移動します</p>
        <img class="d-block img-fluid" src="assets/kantan-setup-02.png">

        <p>setup-*.exeを実行するとコンポーネントがダウンロードされゆーかねすぴれこが構成されます</p>
        <img class="d-block img-fluid" src="assets/kantan-setup-03.png">
        <p>結構時間かかる…！</p>
        <img class="d-block img-fluid" src="assets/kantan-setup-04.png">
        <p>セットアップは完了したのでランチャーを起動します</p>
        <img class="d-block img-fluid" src="assets/kantan-setup-05.png">
      
        <h4 class="border-bottom border-dark-subtle my-3">更新インストール</h4>
        <p>導入時に作成したフォルダにダウンロードしたsetup-*.exeを移動します<br>
          setup-*.exeを実行するとコンポーネントがダウンロードされゆーかねすぴれこが更新されます</p>
        </section>

      <section class="container ms-5 mb-5">
        <h3>認識する準備！</h3>
        <p>recognize-gui.exeをダブルクリックで実行します。<br>
          プリセットから簡易設定を行いましょう。</p>
        <img class="d-block img-fluid" src="assets/kantan-ninshiki-01.png">

        <p>※whisperを実用的に使うにはPCにNVIDIAのGPUが搭載されている必要があります</p>

        <h4 class="border-bottom border-dark-subtle my-3">[ゆかりねっと限定]外部連携の設定！</h4>
        <img class="d-block img-fluid" src="assets/kantan-ninshiki-02.png">
        <p>※ゆかコネNEOは自動で連携するので通常必要ありません</p>
      </section>

      <section class="container ms-5 mb-5">
        <h3>マイクの調整！</h3>
        <h4 class="border-bottom border-dark-subtle my-3">マイクデバイスの選択！</h4>
        <p>マイクデバイスをプルダウンすると接続されている入力デバイスの一覧が並ぶので使っているものを選択します。<br>
          このデバイスは出力含むサウンドデバイスに変更があると順序が変わり再度選択する必要があるのでDACなど抜き差ししている人は特に注意してください！</p>
        <img class="d-block img-fluid" src="assets/kantan-mic-01.png">
        
        <h4 class="border-bottom border-dark-subtle my-3">環境音の測定！</h4>
        <p>メニューから環境音の測定を実施します。このときしゃべらず結果が出るのを待ってください。環境音測定画面に環境音から計算した閾値が出ているのでそれを画面に入力します。</p>
        <img class="d-block img-fluid" src="assets/kantan-mic-02.png">

        <h4 class="border-bottom border-dark-subtle my-3">そして認識テスト！</h4>
        <p>メニューからマイクテストを実施します。</p>
        <img class="d-block img-fluid" src="assets/kantan-mic-03.png">

        <p>どうですか？しゃべり終わったタイミングで認識が終了しましたか？認識できる声量が出ているとインジケータの色が緑色にそして声を認識すると水色に変化します。緑色に変わらない場合は閾値を水色に変わらない場合はノイズがうるさすぎる可能性があります。Windowsのマイクボリュームを見直してください。</p>
        <img class="d-block img-fluid" src="assets/kantan-mic-04.png">

        <p>どういう音が認識しているか確認したい場合カテゴリそのほかにある[録音]をTrueにしてテストを実行すると認識した音声データをwavファイルを保存します。これを聞いて無駄がないか確認しましょう！<br>
          ※ このオプションはゆかりねっと連携時も有効でwavで保存するので必要ない場合はFalseに設定して録音されないようにしましょう</p>
        <img class="d-block img-fluid" src="assets/kantan-mic-05.png">
      </section>

      <section class="container ms-5 mb-5">
        <h3>ゆーかねすぴれこで認識してゆかりねっとでしゃべらせる！</h3>
        <p>これで準備ができたのでいよいよゆかりねっとでボイロ(等)にしゃべらせましょう。</p>
        <ol>
          <li>まずゆかりねっとで認識を開始します</li>
          <li>起動ボタンをクリックして本体を起動します</li>
          <li>認識中の表示が出たらなにかしゃべってみます</li>
          <li>それに合わせてボイロがしゃべる…！</li>
        </ol>
        <img class="d-block img-fluid" src="assets/kantan-yukanette-01.png">

        <p>どうですか？問題なく動きましたか？設定はここまでです。お疲れさまでした…！<br>
          設定は保存されるので次回からは起動ボタンだけでOKですよ！</p>
      </section>
    </section>


    <!--
    
    詳細タブ
    
    -->
    <section class="tab-pane" id="info-tab-pane" role="tabpanel" aria-labelledby="faq-tab" tabindex="0">
      <h2 class="container ms-5 mb-3">WIP</h2>
    </section>

    <!--
    
    FAQタブ
    
    -->
    <section class="tab-pane" id="faq-tab-pane" role="tabpanel" aria-labelledby="faq-tab" tabindex="0">
      <h2 class="d-none container ms-5 mb-3">FAQ</h2>
      <section class="container ms-5 mb-5">
        <h3>発話時間とPCMのサイズが一致しません</h3>
        <p>特定の条件下でPCMデータに無音時間を入れPCMデータを水増しします。<br>
          これは冒頭および末尾すぐの音が認識されにくいための処置です。<br>
          フェードデータが挿入されている場合ログレベル2以上で「末尾0.25s挿入」などが表示されます。</p>
      </section>

      <section class="container ms-5 mb-5">
        <h3>認識モデルのgoogle、google_duplex、google_mixは何が違いますか？</h3>
        <table class="table table-bordered">
          <tr>
            <td>google</td>
            <td>speech_recognition実装の移植</td>
          </tr>
          <tr>
            <td>google_duplex</td>
            <td>chromium実装の移植</td>
          </tr>
          <tr>
            <td>google_mix</td>
            <td>googleとgoogle_duplexを併用して認識精度を高めます</td>
          </tr>
        </table>
      </section>

      <section class="container ms-5 mb-5">
        <h3>音声認識ランチャーのマイク一覧が出てきませんor音声認識ランチャーが立ち上がってきません</h3>
        <p>これらはアンチウィルスソフトが悪さをしている可能性があります。<br>
          アンチウィルスソフトの除外対象にして再度インストールを行ってみてください。</p>

        <p>また、ゆーかねすぴれこをパスの深い階層に置くと起動に失敗する可能性がありますので、<br>
          ゆーかねすぴれこを深い階層に置かないようにお願いします。<br>
          浅い階層に置いてください。</p>

        <p>
          以下は20250112より前のバージョンでの情報になります。20250112移行のバージョンでは日本語が含まれるフォルダでは起動出来ないようにしました。<br>
          日本語が含まれるフォルダに置くと起動に失敗する事象が確認されています。起動に失敗した場合英文字のフォルダ名に変えてみてください。<br>
          例えば、「D:\ゆーかねすぴれこ」は起動に失敗します。
        </p>
      </section>

      <section class="container ms-5 mb-5">
        <h3>英語翻訳して字幕ってどう出せばいいですか</h3>
        <p>ゆーかねすぴれこで翻訳モデルにkotoba_whisperを指定します。このとき認識モデルはgoogle_mixかkotoba_whisperにしてください。</p>
        <p>OBSの設定でWebソケットを有効にします。ポートとパスワードをメモしてください(a)。</p>
        <p>OBSのソースに字幕用のテキストを追加します(b)。</p>
        <p>ゆーかねすぴれこの字幕設定で字幕連携をobsWebソケット設定に、(a)でメモしたポートとパスワードをコピーします。英語字幕ソースに(b)で作成したテキストの名前を設定します。</p>
        <p>これで完了です。</p>

        <h4 class="border-bottom border-dark-subtle my-3">字幕の設定を微調整したい</h4>
        <p>ゆーかねすぴれこ起動中に字幕のテキストソースを編集するとクラッシュします。(仕様)OBSの設定で一度Webソケットを停止してテキストソースの設定を編集してください。再度Webソケットを有効にすればゆーかねすぴれこは再接続します。</p>
      </section>
    </section>
  </section>

<!--
  <div class="page-footer fixed-bottom bg-secondary">
    <div class="text-center text-light pt-1 pb-1">
        ふったー
    </div>
  </div>
-->

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
<script>
document.addEventListener("DOMContentLoaded",
  function() {
    const account = "HARUKei66494739";
    const repository = "recognize";
    fetch(`https://api.github.com/repos/${account}/${repository}/releases`)
      .then(function (res) {
        return res.json();
      }).then(function (json) {
        console.log("aa");
        for(const release of json) {
          if(!release.draft || !release.prerelease) {
            for(const asset of release.assets) {
                console.log(asset.name);
              if(asset.name.match(/^setup-v.+\.exe$/)) {
                console.log("aaa");
                console.log(document.getElementById("download"));

                document.getElementById("download").addEventListener(
                  "click",
                  function(ev) {
                    console.log(asset.browser_download_url);
                    document.location.assign(asset.browser_download_url);
                  });
                document.getElementById("version").innerText = release.tag_name;
                document.getElementById("download-fail-container").style.display = "none";
                document.getElementById("download-container").style.display = "block";
                return;
              }
            }
          }
        }
      });
  });
  </script>
</body>
</html>
